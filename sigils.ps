/sigil_parts <<
    % current fits between y=0.25, 0.5
    % set fits between y=-0.5, -0.25
    % state components fit between -0.5, 0.25
    /current {
        0 0.375 16 recip spcircle nstroke
        -0.5 0.5 goto 0.5 0.5 goto 0 0.25 goto closepath nstroke
    }
    /set {
        -0.25 -0.25 goto
        0.25 -0.25 goto
        0 -0.5 goto
        closepath nstroke
        0 -0.25 goto 0 -0.5 goto 
        -0.5 -0.5 goto 
        nstroke
    }
    /color {
        0 -0.125 0.375 30 180 sparc nstroke
        0 -0.125 0.375 180 -30 sparc nstroke
    }
    /cmykcolor {
        sigil_parts /color get exec
        gsave
            0 -0.125 translate
            4 {
                % 0 0.375 goto
                0.375 dup dup -90 -180 arcn
            } circrepeat closepath nstroke
        grestore
    }
    /graycolor {
        sigil_parts /color get exec
        gsave
            0 -0.125 translate
            0 0 goto 0.375 -30 polar goto nstroke
        grestore
    }
    /hsbcolor {
        sigil_parts /color get exec
        gsave
            0 -0.125 translate
            0 0 0.125 spcircle nstroke
            -0.375 0 goto 0 0 goto 0 0.375 goto nstroke
        grestore
    }
    /rand {
        gsave
            0 -0.125 translate
            0.375 softscale
            6 {
                0 1 goto
            } circrepeat closepath nstroke
            3 {
                0 0 goto 0 -1 goto nstroke
            } circrepeat
        grestore
    }
    /rgbcolor {
        sigil_parts /color get exec
        gsave
            0 -0.125 translate
            3 {
                0 0.375 goto
            } circrepeat closepath nstroke
        grestore
    }
    /line {
        0 0.25 goto 0 -0.5 goto 0.5 -0.5 goto nstroke
    }
    /linecap {
        sigil_parts /line get exec
        0 -0.125 0.25 60 180 sparc
        0 -0.125 0.25 -180 -60 sparc
        nstroke
    }
    /linejoin {
        sigil_parts /line get exec
        0 -0.125 0.25 -150 0 sparc
        0.25 0.125 goto
        -0.25 0.125 goto
        nstroke
    }
    /linewidth {
        sigil_parts /line get exec
        -0.5 0 goto -0.25 -0.25 goto 0 0 -0.125 pop goto 0.25 -0.25 goto 0.5 0 goto nstroke
    }
    /point {
        -0.5 -0.5 goto
        -0.5 0.25 goto
        0.25 0 0.25 90 -90 sparcn
        -0.5 -0.25 goto
        nstroke
        0 0 16 recip spcircle nstroke
    }
    /matrix {
        -0.5 -0.5 0.5 0.25 box nstroke
        -0.5 -0.125 goto 0.5 -0.125 goto nstroke
        0 -0.5 goto 0 0.25 goto nstroke
    }
>> def
/sigil_current { /subsigil arg
    sigil_parts subsigil get exec
    sigil_parts /current get exec
} def
/sigil_set { /subsigil arg
    gsave
        0 4 recip translate
        sigil_parts subsigil get exec
    grestore
    sigil_parts /set get exec
} def
/sigil_bank <<
    /RETURN {
        2 {
            0.5 0 goto
            0 0.375 goto
        } circrepeat
        closepath nstroke
        0.75 -0.25 goto 0.75 0.25 goto nstroke
    }
    /COMPLETE {
        0 -0.25 goto 0 0.25 goto 0.5 0 goto closepath nstroke
    }
    /abs {
        -0.5 0.5 goto
        -0.5 -0.5 goto
        0 0.5 goto
        0.5 -0.5 goto
        0.5 0.5 goto
        nstroke
        -0.25 0 goto 0.25 0 goto nstroke
    }
    /add {
        -0.5 -0.5 goto 0 0.5 goto 0.5 -0.5 goto nstroke
        -0.25 0 goto 0.25 0 goto nstroke
        0 -0.25 goto 0 0.25 goto nstroke
    }
    /and {
        -0.25 -0.5 goto
        0 0.25 0.125 -30 90 sparc
        0 0.25 0.125 90 210 sparc
        0.25 -0.5 goto
        nstroke
        0 0 0.375 -120 -45 sparc
        nstroke
    }
    /arc {
        0 0 0.5 -45 90 sparc
        0 0 0.5 90 215 sparc
        gsave currentpoint newpath 16 recip spcircle nstroke grestore
        nstroke
        -0.5 0 goto 0.5 0 goto nstroke
    }
    /arcn {
        -1 1 scale
        0 0 0.5 -45 90 sparc
        0 0 0.5 90 215 sparc
        gsave currentpoint newpath 16 recip spcircle nstroke grestore
        nstroke
        -0.5 0 goto
        -0.125 dup goto
        0.125 dup goto
        0.5 0 goto nstroke
    }
    /array {
        0 0 0.5 spcircle nstroke
        0 0 0.25 spcircle nstroke
        {
            -30 cos half -30 sin half goto 0.5 -0.5 goto nstroke
        } hmirror
    }
    /begin {
        -0.25 0.5 0.5 0 -90 arcn
        -0.25 -0.5 0.5 90 0 arcn
        nstroke
        -0.25 0.5 0.375 0 -90 arcn
        -0.25 -0.5 0.375 90 0 arcn
        nstroke
    }
    /closepath {
        0 0 0.5 60 180 sparc
        0 0 0.5 180 -60 sparc
        0 0 goto
        % 0.5 0 0.5 240 180 sparcn
        % 0.5 0 0.5 180 120 sparcn
        closepath
        gsave currentpoint newpath 16 recip spcircle nstroke grestore
        nstroke
        % doot
    }
    /copy {
        0 0 0.5 60 180 sparc
        0 0 0.5 180 -60 sparc
        nstroke
        0.25 0 0.5 60 180 sparc
        0.25 0 0.5 180 -60 sparc
        nstroke
    }
    /currentcolor { /color sigil_current }
    /setcolor { /color sigil_set }
    /currentcmykcolor { /cmykcolor sigil_current }
    /setcmykcolor { /cmykcolor sigil_set }
    /currentgraycolor { /graycolor sigil_current }
    /setgraycolor { /graycolor sigil_set }
    /currenthsbcolor { /hsbcolor sigil_current }
    /sethsbcolor { /hsbcolor sigil_set }
    /currentrgbcolor { /rgbcolor sigil_current }
    /setrgbcolor { /rgbcolor sigil_set }
    /currentlinecap { /linecap sigil_current }
    /setlinecap { /linecap sigil_set }
    /currentlinejoin { /linejoin sigil_current }
    /setlinejoin { /linejoin sigil_set }
    /currentlinewidth { /linewidth sigil_current }
    /setlinewidth { /linewidth sigil_set }
    /currentmatrix { /matrix sigil_current }
    /setmatrix { /matrix sigil_set }
    /currentpoint { /point sigil_current }
    /rrand { /rand sigil_current }
    /srand { /rand sigil_set }
    /def {
        0 0 0.5 spcircle nstroke
        3 {
            0 0.5 goto
        } circrepeat closepath nstroke
    }
    /dict {
        3 { 3 sqrt recip 0 goto
        } circrepeat closepath nstroke
        3 { 3 sqrt recip half 0 goto
        } circrepeat closepath nstroke
    }
    /div {
        -0.25 -0.5 goto -0.25 0.5 goto 0 0 0.5 90 -90 arcn closepath nstroke
        -0.5 0 dot
        0 0 dot
    }
    /dup {
        gsave
            -0.125 0 translate
            -0.25 0.5 goto
            0 0 0.5 90 -90 arcn
            -0.25 -0.5 goto
            closepath nstroke
            0 0.5 goto 0 -0.5 goto nstroke
        grestore
    }
    /end {
        gsave
            180 rotate
            sigil_bank /begin get exec
        grestore
    }
    /exch {
        0.5 0.5 goto -0.5 0.5 goto -0.5 -0.5 goto 0.5 -0.5 goto nstroke
        -0.5 0 goto 0.5 0 goto nstroke
        {
            -0.25 -0.25 goto 0.25 0.25 goto 0 0.25 goto nstroke
        } vmirror
    }
    /fill {
        gsave
            2 recip softscale
            -0.75 -1 goto -0.75 1 goto 0.75 1 goto nstroke
            -0.75 0 goto 0.75 0 goto nstroke
            /step 0.25 def
            -0.75 step add step 0.75 step sub {
                0 goto 0 1 rgoto nstroke
            } for
        grestore
    }
    /forall {
        gsave
            2 recip softscale
            -0.75 -1 goto -0.75 1 goto 0.75 1 goto nstroke
            -0.75 0 goto 0.75 0 goto nstroke
            -0.75 0.5 goto
            0 -0.5 goto
            0.75 0.5 goto
            nstroke
        grestore
    }
    /gsave {
        gsave
            0.5 softscale
            0.25 0.5 goto
            0 0.5 0.5 0 180 sparc
            0 -0.5 0.5 180 360 sparc
            0.25 -0.5 goto
            nstroke
        grestore
    }
    /grestore {
        gsave
            180 rotate
            sigil_bank /gsave get exec
        grestore
    }
    /idiv {
        sigil_bank /div get exec
        gsave
            -0.25 0 translate
            2 {
                -0.25 -0.25 goto 0.25 -0.25 goto nstroke
            } circrepeat
        grestore
    }
    /if {
        0 -0.5 goto 0 0.5 goto nstroke
        {
            -0.25 0.5 goto 0.25 0.5 goto nstroke
        } vmirror
        0 -0.5 goto 0 -0.25 0.25 -0.25 0.25 0 curveto nstroke
    }
    /ifelse {
        0 -0.5 goto 0 0.5 goto nstroke
        {
            -0.25 0.5 goto 0.25 0.5 goto nstroke
        } vmirror
        {
            0 -0.5 goto 0 -0.25 0.25 -0.25 0.25 0 curveto nstroke
        } hmirror
    }
    /index {
        0 -0.5 goto 0 0.5 goto nstroke
        {
            -0.25 0.5 goto 0.25 0.5 goto nstroke
        } vmirror
        0 0.25 goto -0.25 0.25 goto -0.25 -0.25 goto nstroke
    }
    /length {
        -0.5 0.5 goto
        -0.5 -0.5 goto
        0.5 -0.5 goto
        0 0.25 rgoto
        nstroke
        -0.375 0.125 0.375 {
            -0.5 goto 0 0.25 rgoto nstroke
        } for
    }
    /lineto {
        -0.375 0.5 goto
        -0.375 -0.5 goto
        0.375 -0.5 goto nstroke
        0.375 -0.5 16 recip spcircle nstroke
    }
    /mod {
        -0.5 -0.5 goto
        -0.5 0.5 goto
        0 0 goto
        0.5 0.5 goto
        0.5 -0.5 goto nstroke
        0 0 0.25 135 180 sparc
        0 0 0.25 180 0 sparc
        0 0 0.25 0 45 sparc
        nstroke
    }
    /moveto {
        -0.5 dup goto
        -0.5 0.5 goto
        0 0 goto
        0.5 0.5 goto
        0.5 -0.5 goto nstroke
        0.5 -0.5 16 recip spcircle nstroke
    }
    /mul {
        {
            0.5 -0.5 goto 0.5 0.5 goto -0.25 -0.25 goto nstroke
        } hmirror
    }
    /neg {
        -0.5 -0.5 goto
        -0.5 0.5 goto
        0.5 -0.5 goto
        0.5 0.5 goto
        nstroke
        -0.25 0 goto 0.25 0 goto nstroke
    }
    /not {
        -0.5 -0.5 goto
        -0.5 0.5 goto
        0.5 -0.5 goto
        0.5 0.5 goto
        nstroke
        -0.25 0 goto 0.25 0 goto 0.25 -0.125 goto nstroke
    }
    /or {
        0 0 0.375 spcircle nstroke
        2 {
            0 0.5 goto 0 0.125 goto nstroke
        } circrepeat
    }
    /pop {
        -0.5 -0.5 goto
        -0.5 0.5 goto
        0.25 0.25 0.25 90 -90 sparcn
        -0.5 0 goto
        whitefill nstroke
        3 {
            -0.25 dup goto 0.25 dup goto nstroke
            45 rotate
        } repeat
    }
    /rand {
       gsave
           0 0.25 translate
           sigil_parts /rand get exec 
       grestore
       3 sqrt 4 div neg 0.75 mul -0.5 goto 0 0.5 rgoto nstroke
       0.25 -0.5 goto 0 -0.25 goto nstroke
    }
    /repeat {
        gsave
            3 {
                0.25 0 goto
                0.5 -0.5 goto
                nstroke
                -0.25 0 translate
            } repeat
        grestore
        -0.5 -0.5 goto
        -0.5 0.5 goto
        0.25 0.25 0.25 90 -90 sparcn
        -0.5 0 goto
        whitefill nstroke
    }
    /roll {
        gsave
            0.125 0 translate
            -0.5 -0.5 goto -0.5 0.25 goto nstroke
            0.25 -0.5 goto -0.25 0 goto nstroke
            gsave
                -0.25 0.25 translate
                3 {
                    0 0 0.25 -30 90 sparc
                    0.125 0.125 goto
                    nstroke
                } circrepeat
            grestore
        grestore
    }
    /rotate {
        gsave
            -90 rotate
            -0.5 -0.5 goto
            -0.5 0.5 goto
            0.25 0.25 0.25 90 -90 sparcn
            -0.5 0 goto
            whitefill nstroke
            0 0 goto 0.5 -0.5 goto nstroke
        grestore
    }
    /scale {
        6 recip softscale
        0 1 translate
        0 1 1 0 270 arc
        0 -2 2 90 -180 arcn nstroke
    }
    /stroke {
        0 0.25 goto
        0 0.25 0.25 90 -90 arc
        0 -0.25 0.25 90 -90 arcn
        nstroke
        0 -0.5 16 recip spcircle nstroke
    }
    /sub {
        gsave
            -0.125 0 translate
            0 0.25 0.25 0 180 sparc
            0 0.25 0.25 180 -90 sparc
            0 -0.25 0.25 90 0 sparcn
            0 -0.25 0.25 0 180 sparcn
            nstroke
            0.5 -0.25 goto 0 -0.25 goto nstroke
        grestore
    }
    /translate {
        2 recip softscale
        -0.75 0.75 goto
        0.75 0.75 goto
        nstroke
        0 0.75 goto 0 -1 goto nstroke
        0.5 0.5 goto 0.75 0.75 goto 0.5 1 goto nstroke
    }
    /xor {
        -0.5 0.5 goto
        0 0 0.5 -45 90 sparc
        0 0 0.5 90 225 sparc
        0.5 0.5 goto
        nstroke
    }
>> def

